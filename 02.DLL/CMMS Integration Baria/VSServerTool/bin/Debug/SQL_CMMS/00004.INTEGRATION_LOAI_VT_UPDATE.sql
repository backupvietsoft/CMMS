



IF NOT EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'INTEGRATION_LOAI_VT_UPDATE')
   exec('CREATE PROCEDURE [dbo].[INTEGRATION_LOAI_VT_UPDATE] AS BEGIN SET NOCOUNT ON; END')
GO

ALTER PROC [dbo].[INTEGRATION_LOAI_VT_UPDATE]
	@MS_LOAI_VT nvarchar(10),	
	@MS_LOAI_VT_CHA nvarchar(10),
	@TEN_LOAI_VT_TV nvarchar(250),
	@STATUS nvarchar(1)
AS



IF @STATUS = 'N'
BEGIN
	IF EXISTS (SELECT MS_LOAI_VT FROM LOAI_VT WHERE MS_LOAI_VT = @MS_LOAI_VT)
	BEGIN
		UPDATE LOAI_VT SET [TEN_LOAI_VT_TV] = @TEN_LOAI_VT_TV,	[TEN_LOAI_VT_TA] = @TEN_LOAI_VT_TV,
			[TEN_LOAI_VT_TH] = @TEN_LOAI_VT_TV,MS_LOAI_VT_CHA = @MS_LOAI_VT_CHA
		WHERE MS_LOAI_VT = @MS_LOAI_VT
	END
	ELSE
	BEGIN
		INSERT INTO [LOAI_VT]([MS_LOAI_VT],[TEN_LOAI_VT_TV],[TEN_LOAI_VT_TA],[TEN_LOAI_VT_TH],[VAT_TU],[MS_LOAI_VT_CHA])
		VALUES( @MS_LOAI_VT, @TEN_LOAI_VT_TV, @TEN_LOAI_VT_TV, @TEN_LOAI_VT_TV,0,@MS_LOAI_VT_CHA)
	END	
END
	
IF @STATUS = 'E'
BEGIN
		UPDATE LOAI_VT SET [TEN_LOAI_VT_TV] = @TEN_LOAI_VT_TV,	[TEN_LOAI_VT_TA] = @TEN_LOAI_VT_TV,
			[TEN_LOAI_VT_TH] = @TEN_LOAI_VT_TV,MS_LOAI_VT_CHA = @MS_LOAI_VT_CHA
		WHERE MS_LOAI_VT = @MS_LOAI_VT
END	

IF @STATUS = 'D'
BEGIN
	DELETE LOAI_VT WHERE MS_LOAI_VT = @MS_LOAI_VT
END